#!/bin/bash

# New Robot Install

apt-get update
apt-get dist-upgrade -y
apt-get install vim wireless-tools -y

wpa_passphrase epsilon-xtreme 9181918191 > /etc/wpa_supplicant/wpa_supplicant.conf

cat << EOF > /etc/network/interfaces
# This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).

# Loopback
auto lo
iface lo inet loopback

# Ethernet
auto eth0
iface eth0 inet dhcp

# WiFi
auto wlan0
iface wlan0 inet dhcp
pre-up wpa_supplicant -B -Dwext -i wlan0 -c /etc/wpa_supplicant/wpa_supplicant.conf
post-up iwconfig wlan0 power off
post-down killall -q wpa_supplicant
EOF

ifup wlan0

cat << EOF > /etc/udev/rules.d/100-darwin.rules
KERNEL=="ttyUSB0", MODE="0666"
KERNEL=="video0", MODE="0666"
EOF

cat << EOF > /etc/rc.local
#!/bin/sh -e
#
# rc.local
#
# This script is executed at the end of each multiuser runlevel.
# Make sure that the script will "exit 0" on success or any other
# value on error.
#
# In order to enable or disable this script just change the execution
# bits.
#
# By default this script does nothing.

# Set volume to 100%
amixer sset Master 100%

# Start PS3 bluetooth daemon
screen -S ps3walk sixad --start

exit 0
EOF

# Add PS3 controller tools
apt-get install software-properties-common -y
apt-add-repository ppa:falk-t-j/qtsixa -y
apt-get update
apt-get install sixad -y